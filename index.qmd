---
title: "Workshop on  Open Science VfS 2025"
author: 
  - "Lars Vilhuber"
  - "Levent Neyse"
date: 16 September  2025
editor_options: 
  chunk_output_type: console
---

```{r config,include=FALSE}
library(readr)
library(here)
library(knitr)
library(dplyr)
library(ggplot2)
library(qualtRics)
library(lubridate)
library(qrcode)
library(kableExtra)
library(tidylog)

# qualtRics secrets are read from the environment:
# - QUALTRICS_API_KEY
# - QUALTRICS_BASE_URL
# Let's check that they are there:

message(Sys.getenv("QUALTRICS_BASE_URL"))

# The repository name

message(Sys.getenv("GITHUB_REPOSITORY"))

# Process the repository name to generate the URL
# - split the two components
# - combine them into a URL with 'github.io' in the middle

GITHUB_REPOSITORY <- Sys.getenv("GITHUB_REPOSITORY")
GITHUB_REPOSITORY_PARTS <- strsplit(GITHUB_REPOSITORY, "/")[[1]]
REPOSITORY_URL <- paste0("https://github.com/", GITHUB_REPOSITORY)
WEBSITE_URL <- paste0("https://", GITHUB_REPOSITORY_PARTS[1], ".github.io/", GITHUB_REPOSITORY_PARTS[2])

# Qualtrics data for Day 1:
# you can find this with all_surveys() %>% arrange(creationDate) %>% head()

QUALTRICS_FULL_URL <- "https://cornell.yul1.qualtrics.com/jfe/form"
QUALTRICS_DAY1 <- "SV_bBqbJ9cSSJdOBw2"

# Time when this was posted (discard anything before that)

QUALTRICS_DAY1_STIME <- ymd_hms("2025-09-08 23:59:00")
QUALTRICS_DAY2_ETIME <- ymd_hms("2025-09-16 23:59:00")

if (!dir.exists(here::here("data"))) {
  dir.create(here::here("data"))
}
```

::: {.panel-tabset}


## Follow along

```{r qrcode}
#| echo: false

code <- qr_code(WEBSITE_URL)
plot(code)

```


## Survey 1

Please fill out this survey on background and skills, to provide us with information on who you are. It will help us improve the presentation, and make it more relevant for you.

<`r file.path(QUALTRICS_FULL_URL,QUALTRICS_DAY1)`>

## While you wait

[![](./images/Screenshot_os_video.png)](https://www.youtube.com/watch?v=EWclIBQpBVs)

## Intro

[Intro](slides/index.html)

### Results from Survey 1

*Last updated: `r format(Sys.time(), "%d %B %Y, %H:%M")`*

```{r downloaddata,include=FALSE}
# download data to local location

data.raw <- fetch_survey(surveyID = QUALTRICS_DAY1, verbose = TRUE) 
data <- data.raw |>
        mutate(StartDate <- ymd_hms(StartDate)) |>
        filter(Status != "Survey Preview") |>
        filter(Consent == "I agree that my data will be used in the manner described.") |>
        filter(StartDate > QUALTRICS_DAY1_STIME & EndDate < QUALTRICS_DAY2_ETIME) |>
  # renaming variables
  select(StartDate,EndDate,Status,Finished,RecordedDate,ResponseId,Consent,Degree,JEL_primary,
        replicationpackage,preregistration,  
         starts_with("JEL_secondary"),starts_with("Desktop _"),starts_with("Advanced_usage_"),
         starts_with("Programming_"),starts_with("Versioning_")) 


```

#### Education

```{r create_table1, results='asis', include=TRUE,echo=FALSE,message=FALSE}

if ( nrow(data) >0 ) {

data |>
  select(Degree,Finished) |>
  group_by(Degree) |>
  summarise(
    Frequency = n(),
    `Frequency (Complete)` = sum(Finished == TRUE, na.rm = TRUE)
  ) |>
  ungroup() |>
  mutate(Percent = round(`Frequency (Complete)`/nrow(data)*100,2)) -> data.table

data.table |>
  kable() |>
  footnote(general = "Percent is calculated as the proportion of completed responses.")
} else {
  cat("No data yet. Check back later.")
}

```

#### Open Science practices


```{r create_table3, results='asis', include=TRUE,echo=FALSE,message=FALSE}

 
# Open Science practices
if ( nrow(data) >0 ) {

data |>
  filter(Finished == TRUE) |>
  select(replicationpackage,preregistration) |>
  summarize( Freq1= sum(replicationpackage == "Yes",na.rm = TRUE),
             Freq2   = sum(preregistration == "Yes",na.rm = TRUE),
            N = n()) |>
  mutate(
    `Replication package` = round(Freq1 / N * 100, 2),
    `Pre-registration`= round(Freq2    / N * 100, 2),
    ` ` = "Open Science Practices"
  )  |>
  select(` `, N , `Replication package`, `Pre-registration`) |>
  kable() |>
  footnote(general = "Percent is calculated as the proportion of completed responses.")
}

```

#### Operating System

```{r create_table2, results='asis', include=TRUE,echo=FALSE,message=FALSE}

# Tables for use of operating system (`Desktop _`(n), 3 categories), command line (Advanced_usage_1), 
if ( nrow(data) >0 ) {

#cat("\n**Operating System**\n\n")
data |>
  filter(Finished == TRUE) |>
  select(starts_with("Desktop _")) |>
  # _1 = Windows, _2 = Mac, _3 = Linux
  # Each field is NA if not ticked.
  pivot_longer(cols = starts_with("Desktop _"), names_to = "OS", values_to = "Used") |>
  # remap  Desktop _1 = Windows, _2 = Mac, _3 = Linux
  mutate(OS = recode(OS,
                    "Desktop _1" = "Windows",
                    "Desktop _2" = "Mac",
                    "Desktop _3" = "Linux")) |>
  filter(!is.na(Used)) |>
  group_by(OS) |>
  # Frequency and percentages
  summarise(
    Frequency = n()
  ) |>
  mutate(
    Percent = round(Frequency / sum(data$Finished == TRUE, na.rm = TRUE) * 100, 2)
  )  |>
  kable() |>
  footnote(general = "Completed responses only. Multiple mentions possible.")
}
```



##  Part 1


-  Why results don't always replicate — and what we learned from big tests: a quick tour of failure points, plus lessons from 2D:4D and CRT conceptual replications.
- Your open-science toolkit in action: preregistration & pre-analysis plans, registered reports, and crowdscience (many labs/designs/analysts) to make findings robust and credible.
-  What's next for collaborative economics: building global infrastructures for reliable research—capped with fresh insights from the VfS Open Science Survey.



## Part 2

Implementing transparency and reproducibility in practice

- requirements, data and code availability policies, replication  packages [slides](https://larsvilhuber.github.io/summer-school-qicss-2025/presentation/presentation.html#/what-is)
- What does that mean in practice 




### Additional information

- [Reproducibility when some data are confidential](https://labordynamicsinstitute.github.io/reproducibility-confidential/) 
- [Advanced self-checking of reproducibility](https://larsvilhuber.github.io/self-checking-reproducibility/presentation/)
- [Reproducibility for LLM and AI](https://larsvilhuber.github.io/reproducibility-for-llm/presentation/)




```{r, child=c(here::here('99-links.md'))}
```

:::

